@page "/"
@rendermode InteractiveServer



<input @bind="nameInput" placeholder="Enter your name" class="form-control" />
<button class="btn btn-primary" @onclick="CallApi">Click me</button>

<h3>API Response:</h3>

<p>@responseMessage</p>

@inject HttpClient Http

@code {
    private string nameInput = "";
    private string responseMessage = "No response yet.";

    private async Task CallApi()
    {
        if (string.IsNullOrWhiteSpace(nameInput))
        {
            responseMessage = "Please enter a name.";
            return;
        }

        try
        {
            var response = await Http.GetFromJsonAsync<ResponseDto>($"sayhello?name={Uri.EscapeDataString(nameInput)}");
            responseMessage = response?.Message ?? "No message received.";
        }
        catch (Exception ex)
        {
            responseMessage = $"Error: {ex.Message}";
        }
    }

    private class ResponseDto
    {
        public string Message { get; set; }
    }
}
